<!doctype html>
<html lang="no">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Strava</title>
    <link rel="stylesheet" href="css/appMenu.css">
    <link rel="stylesheet" href="css/stravaConnection.css">
    <link rel="icon" href="/manifest/favicon.ico" sizes="any">
    <link rel="icon" href="/manifest/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="/manifest/icon.png">
    <link rel="manifest" href="/manifest/site.webmanifest">
    <meta name="theme-color" content="#fafafa">
  </head>
  <body class="strava-connection">
    <main class="page">
      <header class="header">
        <h1 class="header__title">Hent GPS-spor fra Strava</h1>
        <p class="header__subtitle">Her kan du hente alle øktene dine fra Strava, og velge hvilke av dem du vil vise i kartleseren. 
          Bruk dato-velgeren hvis du vil begrense hvilke av Strava-øktene dine som skal bli tilgjengelige for å velges.</p>
      </header>

      <section class="card" aria-labelledby="connectionTitle">
        <div class="card__header">
          <h2 id="connectionTitle" class="card__title">Tilkobling</h2>
          <div id="connectionStatusPill" class="pill pill--neutral" aria-live="polite">Laster…</div>
        </div>
        <div class="card__body">
          <div class="row row--wrap">
            <button id="connectButton" class="button button--primary" type="button">Koble til Strava</button>
            <button id="disconnectButton" class="button button--danger" type="button" hidden>Koble fra</button>
            <button id="syncButton" class="button button--secondary" type="button" disabled>Hent mine aktiviteter fra Strava</button>
          </div>
          <p id="progressIndicator" class="muted" aria-live="polite" hidden></p>
          <p id="connectionDetails" class="muted"></p>
          <p id="errorBanner" class="error" role="status" aria-live="polite" hidden></p>
        </div>
      </section>

      <section class="date-filters" aria-label="Datofilter">
        <div class="date-input-group">
          <label for="dateFrom" class="date-label">Fra</label>
          <input type="date" id="dateFrom" class="input date-input">
        </div>
        <div class="date-input-group">
          <label for="dateTo" class="date-label">Til</label>
          <input type="date" id="dateTo" class="input date-input">
        </div>
        <button id="clearDatesBtn" class="button button--secondary button--icon" type="button" title="Nullstill datoer" aria-label="Nullstill datoer">
          &times;
        </button>
      </section>

      <section class="pill-filters" aria-label="Aktivitetsfiltre">
        <button id="filterRun" class="pill-toggle pill-toggle--active" type="button" aria-pressed="true">Løping</button>
        <button id="filterRace" class="pill-toggle" type="button" aria-pressed="false">Konkurranse</button>
        <button id="filterOnMyMaps" class="pill-toggle" type="button" aria-pressed="false">På mine kart</button>
      </section>

      <div class="view-toggle mobile-only">
        <button id="viewAvailableBtn" class="view-toggle__btn view-toggle__btn--active" type="button" aria-pressed="true">
          Tilgjengelige aktiviteter <span id="mobileAvailableCount" class="badge">(0)</span>
        </button>
        <button id="viewImportedBtn" class="view-toggle__btn" type="button" aria-pressed="false">
          Importerte aktiviteter <span id="mobileImportedCount" class="badge">(0)</span>
        </button>
      </div>

      <section class="grid">
        <section class="card" aria-labelledby="availableTitle">
          <div class="card__header">
            <div class="card__title-row" aria-labelledby="availableTitle">
              <h2 id="availableTitle" class="card__title">Aktiviteter</h2>
              <span id="availableCount" class="card__count">(0)</span>
            </div>
            <div class="row">
              <select id="filterSelect" class="select" aria-label="Filter">
                <option value="all">Alle</option>
                <option value="notImported">Ikke importert</option>
                <option value="imported">Importert</option>
              </select>
              <input id="searchInput" class="input" type="search" placeholder="Søk…" aria-label="Søk">
            </div>
          </div>
          <div class="card__body">
            <div class="row row--wrap row--space">
              <div>
                <button id="selectAllButton" class="button button--secondary" type="button">Velg alle</button>
              </div>
              <div class="row row--wrap">
                <button id="importSelectedButton" class="button button--primary" type="button" disabled>Importer valgte</button>
                <button id="importSelectedOverwriteButton" class="button button--secondary" type="button" disabled>Importer på nytt</button>
              </div>
            </div>
            <ul id="activitiesList" class="list" aria-live="polite"></ul>
          </div>
        </section>

        <section class="card" aria-labelledby="importedTitle">
          <div class="card__header">
            <div class="card__title-row" aria-labelledby="importedTitle">
              <h2 id="importedTitle" class="card__title">Importert</h2>
              <span id="importedCount" class="card__count">(0)</span>
            </div>
          </div>
          <div class="card__body">
            <ul id="importedList" class="list" aria-live="polite"></ul>
          </div>
        </section>
      </section>
    </main>

    <script type="module" src="js/stravaConnection/main.js"></script>
  </body>
</html>


